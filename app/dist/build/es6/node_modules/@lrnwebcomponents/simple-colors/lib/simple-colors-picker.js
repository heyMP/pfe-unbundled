/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{html,css}from"../../../lit-element/lit-element.js";import{SimpleColors}from"../simple-colors.js";import"../../simple-picker/simple-picker.js";class SimpleColorsPicker extends SimpleColors{static get styles(){return[...super.styles,css`
        :host {
          display: inline-block;
        }
        :host([hidden]) {
          display: none;
        }
      `]}render(){return html`
      <simple-picker
        id="picker"
        ?block-label="${this.blockLabel}"
        ?disabled="${this.disabled}"
        ?expanded="${this.expanded}"
        ?hide-option-labels="${this.shades}"
        @change="${this._handleChange}"
        @collapse="${this._handleCollapse}"
        @expand="${this._handleExpand}"
        @option-focus="${this._handleOptionFocus}"
        .aria-labelledby="${this.ariaLabelledby}"
        .label="${this.label}"
        .options="${this.options}"
        .value="${this.value}"
      >
      </simple-picker>
    `}constructor(){super(),this.ariaLabelledby=null,this.blockLabel=!1,this.disabled=!1,this.expanded=!1,this.label=null,this.shades=!1,this.value=null,this.__ready=!1,this.options=this._getOptions(this.colors,this.shades,this.dark)}updated(changedProperties){changedProperties.forEach((oldValue,propName)=>{"colors"===propName&&(this.options=this._getOptions(this.colors,this.shades,this.dark)),"shades"===propName&&(this.options=this._getOptions(this.colors,this.shades,this.dark)),"dark"===propName&&(this.options=this._getOptions(this.colors,this.shades,this.dark)),"value"===propName&&this._fireValueChangedEvent(),this._fireChangeEvent()})}static get properties(){return{...super.properties,ariaLabelledby:{type:String,attribute:"aria-labelledby"},blockLabel:{type:Boolean,attribute:"block-label"},disabled:{type:Boolean},expanded:{type:Boolean,reflect:!0},label:{type:String},options:{type:Array,reflect:!1},shades:{type:Boolean,reflect:!0},value:{type:String,reflect:!0},__ready:{type:Boolean}}}static get tag(){return"simple-colors-picker"}_getOptions(colors,shades,dark){let options=[[]],theme=!1!==dark?"dark":"default";if(!1===shades)options=Object.keys(this.colors).map(key=>[{alt:key,value:key}]),options.unshift([{alt:"none",value:null}]);else{let colorNames=Object.keys(colors);for(let i=0;i<colors[colorNames[0]].length;i++){let shade=Object.keys(colors).map(key=>{let name=key+"-"+(i+1),cssvar="--simple-colors-"+theme+"-theme-"+name;return{alt:name,style:"background-color: var("+cssvar+")",value:cssvar}});options.push(shade)}}return options}_fireValueChangedEvent(){this.dispatchEvent(new CustomEvent("value-changed",{detail:this}))}_fireChangeEvent(){this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:this}))}_handleChange(e){this.value=e.detail.value,void 0!==this.__ready&&this._fireChangeEvent()}_handleCollapse(){void 0!==this.__ready&&this.dispatchEvent(new CustomEvent("collapse",{detail:this}))}_handleExpand(){void 0!==this.__ready&&this.dispatchEvent(new CustomEvent("expand",{detail:this}))}_handleOptionFocus(e){void 0!==this.__ready&&this.dispatchEvent(new CustomEvent("option-focus",{detail:this}))}}export{SimpleColorsPicker};window.customElements.define(SimpleColorsPicker.tag,SimpleColorsPicker);