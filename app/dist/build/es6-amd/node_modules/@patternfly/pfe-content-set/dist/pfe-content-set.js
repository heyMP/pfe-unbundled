define(["exports","../../pfelement/dist/pfelement.js","../../pfe-accordion/dist/pfe-accordion.js","../../pfe-tabs/dist/pfe-tabs.js"],(function(_exports,_pfelement,_pfeAccordion,_pfeTabs){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_pfelement=babelHelpers.interopRequireDefault(_pfelement),_pfeAccordion=babelHelpers.interopRequireDefault(_pfeAccordion),_pfeTabs=babelHelpers.interopRequireDefault(_pfeTabs),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(callback,thisArg){thisArg=thisArg||window;for(var i=0;i<this.length;i++)callback.call(thisArg,this[i],i,this)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function assign(target,varArgs){if(null==target)throw new TypeError("Cannot convert undefined or null to object");for(var to=Object(target),index=1;index<arguments.length;index++){var nextSource=arguments[index];if(null!=nextSource)for(var nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey])}return to},writable:!0,configurable:!0})
/*!
   * PatternFly Elements: PfeContentSet 1.0.0
   * @license
   * Copyright 2020 Red Hat, Inc.
   * 
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   * 
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   * 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   * 
  */;const CONTENT_MUTATION_CONFIG={characterData:!0,childList:!0,subtree:!0};class PfeContentSet extends _pfelement.default{static get version(){return"1.0.0"}get html(){return'\n<style>:host{display:block}#lightdom,:host([hidden]){display:none} /*# sourceMappingURL=pfe-content-set.min.css.map */</style>\n<div id="lightdom" hidden>\n  <slot></slot>\n</div>\n<pfe-tabs hidden></pfe-tabs>\n<pfe-accordion hidden></pfe-accordion>'}static get tag(){return"pfe-content-set"}get templateUrl(){return"pfe-content-set.html"}get styleUrl(){return"pfe-content-set.scss"}static get meta(){return{title:"Content set",description:"This element creates a flexible component that renders an accordion or tabset depending on screen size."}}static get pfeType(){return _pfelement.default.pfeType.combo}static get properties(){const inheritProperties=(obj,tagName)=>{let newObj=Object.assign({},obj);for(const[key,value]of Object.entries(newObj))value.observer&&delete newObj[key].observer,value.cascade&&delete newObj[key].cascade,value.alias||(newObj[key].cascade=tagName);return newObj};let tabProps=inheritProperties(_pfeTabs.default.properties,_pfeTabs.default.tag),accordionProps=inheritProperties(_pfeAccordion.default.properties,_pfeAccordion.default.tag);const dependentProps=Object.assign(tabProps,accordionProps);return Object.assign(dependentProps,{breakpoint:{title:"Custom breakpoint",type:String,observer:"_updateBreakpoint"},align:{type:String,enum:["center"],alias:"tabAlign"},oldAlign:{attr:"pfe-align",alias:"tabAlign"},oldBreakpoint:{type:String,alias:"breakpoint",attr:"pfe-breakpoint"},pfeId:{type:String,attr:"pfe-id",observer:"_copyToId"}})}static get slots(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{$ref:"raw"}}}}get isTab(){let breakpointValue=this.breakpoint?parseInt(this.breakpoint.replace(/\D/g,"")):700;return this.parentNode?this.parentNode.offsetWidth>breakpointValue:window.outerWidth>breakpointValue}get tab(){return this.shadowRoot.querySelector(_pfeTabs.default.tag)}get accordion(){return this.shadowRoot.querySelector(_pfeAccordion.default.tag)}get displayTemplate(){const template=document.createElement("template");return template.innerHTML=this.isTab?_pfeTabs.default.template:_pfeAccordion.default.template,template}constructor(){super(PfeContentSet),this._mutationHandler=this._mutationHandler.bind(this),this._resizeHandler=this._resizeHandler.bind(this),this._observer=new MutationObserver(this._mutationHandler),window.ResizeObserver&&(this._resizeObserver=new ResizeObserver(this._resizeHandler))}connectedCallback(){super.connectedCallback(),this.hasLightDOM()&&Promise.all([customElements.whenDefined(_pfeTabs.default.tag),customElements.whenDefined(_pfeAccordion.default.tag)]).then(()=>{this._build()}),this._observer.observe(this,CONTENT_MUTATION_CONFIG),window.ResizeObserver&&this.parentElement&&this._resizeObserver.observe(this.parentElement)}disconnectedCallback(){super.disconnectedCallback(),this._observer.disconnect(),window.ResizeObserver&&this._resizeObserver.disconnect()}_mutationHandler(mutationsList){if(window.ShadyCSS)return this._observer.disconnect(),this._build(),void setTimeout(()=>{this._observer.observe(this,CONTENT_MUTATION_CONFIG)},0);if(mutationsList)for(let mutation of mutationsList)switch(mutation.type){case"childList":mutation.addedNodes&&this._build(mutation.addedNodes),mutation.removedNodes&&this._removeNodes(mutation.removedNodes);break;case"characterData":mutation.target&&mutation.target.parentNode&&this._updateNode(mutation.target.parentNode,mutation.target.textContent)}else this._build()}_isHeader(el){return el.hasAttribute(this.tag+"--header")||el.tagName.match(/H[1-6]/)}_isPanel(el){return el.hasAttribute(this.tag+"--panel")}_toggleVisible(){this.isTab?(this.tab&&this.tab.removeAttribute("hidden"),this.accordion&&this.accordion.setAttribute("hidden","")):(this.accordion&&this.accordion.removeAttribute("hidden"),this.tab&&this.tab.setAttribute("hidden",""))}_removeNodes(list){let host=this.isTab?this.tab:this.accordion;list.forEach(item=>this._removeNode(item)),host.hasChildNodes()||host.setAttribute("hidden","")}_findConnection(node,host){if("#text"!==node.nodeName&&node.hasAttribute("maps-to")){const id=node.getAttribute("maps-to");if(null!==id){const connection=host.querySelector("#"+id);if(connection)return connection;this.warn("no element could be found with #"+id)}}return null}_removeNode(node){[this.tab,this.accordion].forEach(host=>{const connection=_findConnection(node,host);connection?host.removeChild(connection):this._build()})}_updateNode(node,textContent){[this.tab,this.accordion].forEach(host=>{const connection=_findConnection(node,host);connection?connection.textContent=textContent:this._build()})}_buildSets(sets){let fragment=document.createDocumentFragment();for(let i=0;i<sets.length;i+=2){let header=sets[i],panel=sets[i+1];const template=this.displayTemplate.content.cloneNode(!0);header||this.warn(`no element found at position ${i} of the light DOM input.`),panel||this.warn(`no element found at position ${i+1} of the light DOM input.`),header&&this._isHeader(header)&&panel&&this._isPanel(panel)&&[header,panel].forEach((region,idx)=>{const type=0===idx?"header":"panel";let piece=template.querySelector(`[content-type="${type}"]`).cloneNode(!0);const id=region.id||region.getAttribute("pfe-id")||this.randomId,clone=region.cloneNode(!0);clone.removeAttribute(`${this.tag}--${type}`),piece.appendChild(clone),region.setAttribute("maps-to",id),piece.id=id,fragment.appendChild(piece)})}return fragment}_build(addedNodes){[this.tab,this.accordion].forEach(host=>{host.id||(host.id=this.id||this.pfeId||this.randomId);const rawSets=addedNodes||(this.children?this.children:null);if(!addedNodes&&rawSets&&(host.innerHTML=""),rawSets){let sets=this._buildSets(rawSets);sets&&host.appendChild(sets)}this._toggleVisible()}),Promise.all([customElements.whenDefined(_pfeTabs.default.tag),customElements.whenDefined(_pfeAccordion.default.tag)]).then(()=>{this.isTab&&this.selectedIndex&&(this.tab.selectedIndex=this.selectedIndex)})}_copyToId(){this.id||(this.id=this.pfeId)}_resizeHandler(){this._toggleVisible()}_updateBreakpoint(oldVal,newVal){this._toggleVisible()}}_pfelement.default.create(PfeContentSet);var _default=PfeContentSet;_exports.default=_default}));