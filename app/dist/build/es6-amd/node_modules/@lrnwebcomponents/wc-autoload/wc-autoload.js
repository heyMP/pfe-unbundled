define(["exports","../dynamic-import-registry/dynamic-import-registry.js"],(function(_exports,_dynamicImportRegistry){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.WcAutoload=void 0,
/**
   * Copyright 2020 The Pennsylvania State University
   * @license Apache-2.0, see License.md for full text.
   */
window.WCAutoload=window.WCAutoload||{},window.WCAutoload.requestAvailability=()=>(window.WCAutoload.instance||(window.WCAutoload.instance=document.createElement("wc-autoload"),document.body.appendChild(window.WCAutoload.instance)),window.WCAutoload.instance),window.WCAutoload.process=e=>{var loader=window.WCAutoload.requestAvailability();loader.loaded=!0;var list={};if(window.WCAutoloadRegistryFileProcessed){let target=document;loader.target&&(target=loader.target,loader.processNewElement(target)),target.querySelectorAll("*").forEach(el=>{el.tagName&&!list[el.tagName]&&(loader.processNewElement(el),list[el.tagName]=el.tagName)})}else setTimeout(async()=>{if(window.WCAutoloadBasePath&&(loader.registry.basePath=window.WCAutoloadBasePath),window.WCAutoloadRegistryFile&&!window.WCAutoloadRegistryFileProcessed&&await fetch(window.WCAutoloadRegistryFile).then((function(response){return response.json()})).then((function(data){window.WCAutoloadRegistryFileProcessed=!0,window.WCAutoloadRegistry=data})),window.WCAutoloadRegistry)for(var i in window.WCAutoloadRegistry)loader.registry.register({tag:i,path:window.WCAutoloadRegistry[i]});let target=document;loader.target&&(target=loader.target,loader.processNewElement(target)),target.querySelectorAll("*").forEach(el=>{el.tagName&&!list[el.tagName]&&(loader.processNewElement(el),list[el.tagName]=el.tagName)})},0)},window.addEventListener("load",window.WCAutoload.process),window.WCAutoload.postLoaded=e=>{setTimeout(()=>{let loader=window.WCAutoload.requestAvailability();loader.loaded&&document.querySelectorAll(e.detail.tag).length>0&&loader.registry.loadDefinition(e.detail.tag)},0)},window.addEventListener("dynamic-import-registry--new-registration",window.WCAutoload.postLoaded);class WcAutoload extends HTMLElement{static get tag(){return"wc-autoload"}constructor(){super(),this.loaded=!1,this.registry=window.DynamicImportRegistry.requestAvailability(),this.options={childList:!0,subtree:!0}}connectedCallback(){this._mutationObserver=new MutationObserver(mutations=>{mutations.forEach(mutation=>{mutation.addedNodes.forEach(node=>{this.processNewElement(node)})})}),window.WCAutoloadOptions&&(this.options=window.WCAutoloadOptions),setTimeout(()=>{window.WCAutoloadTarget?this.target=window.WCAutoloadTarget:this.target=document.body,this._mutationObserver.observe(this.target,this.options)},0)}disconnectedCallback(){this._mutationObserver.disconnect()}processNewElement(node){node.tagName&&node.tagName.includes("-")&&"DYNAMIC-IMPORT-REGISTRY"!=node.tagName&&"WC-AUTOLOAD"!=node.tagName&&this.registry.loadDefinition(node.tagName)}}_exports.WcAutoload=WcAutoload,window.customElements.define(WcAutoload.tag,WcAutoload)}));