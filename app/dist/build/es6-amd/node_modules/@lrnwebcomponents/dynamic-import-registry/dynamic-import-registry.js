define(["exports","meta","require"],(function(_exports,meta,_require){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.DynamicImportRegistry=void 0,meta=babelHelpers.interopRequireWildcard(meta),_require=babelHelpers.interopRequireWildcard(_require),
/**
   * Copyright 2020 The Pennsylvania State University
   * @license Apache-2.0, see License.md for full text.
   */
window.DynamicImportRegistry=window.DynamicImportRegistry||{},window.DynamicImportRegistry.requestAvailability=()=>(window.DynamicImportRegistry.instance||(window.DynamicImportRegistry.instance=document.createElement("dynamic-import-registry"),document.body.appendChild(window.DynamicImportRegistry.instance)),window.DynamicImportRegistry.instance);class DynamicImportRegistry extends HTMLElement{static get tag(){return"dynamic-import-registry"}constructor(delayRender=!1){super(),this.list={},this.__loaded={},this.basePath=this.pathFromUrl(decodeURIComponent(meta.url))+"../../"}connectedCallback(){window.addEventListener("dynamic-import-registry--register",this.registerDefinitionEvent.bind(this))}disconnectedCallback(){window.removeEventListener("dynamic-import-registry--register",this.registerDefinitionEvent.bind(this))}register(item){item.tag&&item.path?this.list[item.tag]||(this.list[item.tag]=item.path):console.warn("DynamicImportRegistry: registration requires tag and path be set")}registerDefinitionEvent(e){e.detail.tag&&e.detail.path&&this.register(e.detail)}async loadDefinition(tag){if(tag=tag.toLowerCase(),!window.customElements.get(tag)&&this.list[tag]&&!this.__loaded[tag]){this.__loaded[tag]=!0;try{await new Promise((res,rej)=>_require.default([`${this.basePath}${this.list[tag]}`],res,rej)).then(module=>{this.dispatchEvent(new CustomEvent("dynamic-import-registry-loaded",{detail:{tag:tag,path:this.list[tag],module:module}}))})}catch(e){console.warn(e),this.dispatchEvent(new CustomEvent("dynamic-import-registry-failure",{detail:{tag:tag,path:this.list[tag],module:null}}))}}}pathFromUrl(url){return url.substring(0,url.lastIndexOf("/")+1)}}_exports.DynamicImportRegistry=DynamicImportRegistry,window.customElements.define(DynamicImportRegistry.tag,DynamicImportRegistry)}));