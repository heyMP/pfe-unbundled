define(["exports","../../pfelement/dist/pfelement.js"],function(_exports,_pfelement){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.PfeCollapsePanel=_exports.PfeCollapseToggle=_exports.PfeCollapse=void 0;_pfelement=babelHelpers.interopRequireDefault(_pfelement);function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=babelHelpers.getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=babelHelpers.getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return babelHelpers.possibleConstructorReturn(this,result)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(e){return!1}}/*!
 * PatternFly Elements: PfeCollapse 1.0.0
 * @license
 * Copyright 2020 Red Hat, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
*/function generateId(){return Math.random().toString(36).substr(2,9)}var PfeCollapseToggle=/*#__PURE__*/function(_PFElement){babelHelpers.inherits(PfeCollapseToggle,_PFElement);var _super=_createSuper(PfeCollapseToggle);babelHelpers.createClass(PfeCollapseToggle,[{key:"html",// Injected at build-time
get:function get(){return"\n<style>:host{display:block;cursor:default} /*# sourceMappingURL=pfe-collapse-toggle.min.css.map */</style>\n<slot></slot>"}// Injected at build-time
},{key:"templateUrl",get:function get(){return"pfe-collapse-toggle.html"}},{key:"styleUrl",get:function get(){return"pfe-collapse-toggle.scss"}},{key:"expanded",get:function get(){return"true"===this.getAttribute("aria-expanded")},set:function set(val){var value=!!val;this.setAttribute("aria-expanded",value)}}],[{key:"version",// Injected at build-time
get:function get(){return"1.0.0"}},{key:"slots",get:function get(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"pfe-collapsibe-toggle"},{$ref:"pfe-collapse-panel"}]}}}}},{key:"tag",get:function get(){return"pfe-collapse-toggle"}},{key:"properties",get:function get(){return{ariaExpanded:{title:"Aria expanded",type:String,prefix:!1,values:["true","false"]},ariaControls:{title:"Aria controls",type:String,prefix:!1,observer:"_ariaControlsChanged"}}}}]);function PfeCollapseToggle(pfeClass){var _this,_ref=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},_ref$setTabIndex=_ref.setTabIndex,setTabIndex=void 0===_ref$setTabIndex?!0:_ref$setTabIndex,_ref$addKeydownHandle=_ref.addKeydownHandler,addKeydownHandler=void 0===_ref$addKeydownHandle?!0:_ref$addKeydownHandle;babelHelpers.classCallCheck(this,PfeCollapseToggle);_this=_super.call(this,pfeClass||PfeCollapseToggle);_this.controlledPanel=!1;_this._setTabIndex=setTabIndex;_this._addKeydownHandler=addKeydownHandler;_this.addEventListener("click",_this._clickHandler);if(addKeydownHandler){_this.addEventListener("keydown",_this._keydownHandler)}return _this}babelHelpers.createClass(PfeCollapseToggle,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(PfeCollapseToggle.prototype),"connectedCallback",this).call(this);this.expanded=!1;this.id=this.id||"".concat(PfeCollapseToggle.tag,"-").concat(generateId());this.setAttribute("role","button");if(this._setTabIndex){this.setAttribute("tabindex",0)}if(!this.controlledPanel){this._connectPanel(this.getAttribute("aria-controls"))}}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(PfeCollapseToggle.prototype),"disconnectedCallback",this).call(this);this.removeEventListener("click",this._clickHandler);if(this._addKeydownHandler){this.removeEventListener("keydown",this._keydownHandler)}}},{key:"_ariaControlsChanged",value:function _ariaControlsChanged(oldVal,newVal){if(!newVal){return}this._connectPanel(newVal)}},{key:"toggle",value:function toggle(){if(this.hasAttribute("disabled")){return}this.expanded=!this.expanded;// one last try to hook up a panel
if(!this.controlledPanel){this._connectPanel(this.getAttribute("aria-controls"))}if(this.controlledPanel){this.controlledPanel.expanded=this.expanded;this.emitEvent(PfeCollapse.events.change,{detail:{expanded:this.expanded,toggle:this,panel:this.controlledPanel}})}else{this.warn("This toggle doesn't have a panel associated with it")}}},{key:"_clickHandler",value:function _clickHandler(){this.toggle()}},{key:"_keydownHandler",value:function _keydownHandler(event){var key=event.key;switch(key){case" ":case"Spacebar":case"Enter":this.toggle();break;}}},{key:"_connectPanel",value:function _connectPanel(id){// this can be an issue if the pfe-collapse is located within
// a shadow root
if(this.getRootNode){this.controlledPanel=this.getRootNode().querySelector("#".concat(id))}else{this.controlledPanel=document.querySelector("#".concat(id))}}}]);return PfeCollapseToggle}(_pfelement.default);_exports.PfeCollapseToggle=PfeCollapseToggle;var PfeCollapsePanel=/*#__PURE__*/function(_PFElement2){babelHelpers.inherits(PfeCollapsePanel,_PFElement2);var _super2=_createSuper(PfeCollapsePanel);babelHelpers.createClass(PfeCollapsePanel,[{key:"html",// Injected at build-time
get:function get(){return"\n<style>:host{display:none;overflow:hidden;will-change:height}:host([expanded]){display:block;position:relative}:host(.animating){display:block;-webkit-transition:height .3s ease-in-out;transition:height .3s ease-in-out} /*# sourceMappingURL=pfe-collapse-panel.min.css.map */</style>\n<slot></slot>"}// Injected at build-time
},{key:"templateUrl",get:function get(){return"pfe-collapse-panel.html"}},{key:"styleUrl",get:function get(){return"pfe-collapse-panel.scss"}},{key:"animates",get:function get(){return"false"===this.animation?!1:!0}},{key:"expanded",get:function get(){return this.hasAttribute("expanded")||this.hasAttribute("pfe-expanded");// @TODO: Deprecated
},set:function set(val){var value=!!val;if(value){this.setAttribute("pfe-expanded","");// @TODO: Deprecated
this.setAttribute("expanded","");if(this.animates){var height=this.getBoundingClientRect().height;this._fireAnimationEvent("opening");this._animate(0,height)}}else{if(this.hasAttribute("expanded")||this.hasAttribute("pfe-expanded")){// @TODO: Deprecated
var _height=this.getBoundingClientRect().height;this.removeAttribute("expanded");this.removeAttribute("pfe-expanded");// @TODO: Deprecated
if(this.animates){this._fireAnimationEvent("closing");this._animate(_height,0)}}}}}],[{key:"version",// Injected at build-time
get:function get(){return"1.0.0"}},{key:"slots",get:function get(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"pfe-collapsibe-toggle"},{$ref:"pfe-collapse-panel"}]}}}}},{key:"tag",get:function get(){return"pfe-collapse-panel"}},{key:"events",get:function get(){return{animationStart:"".concat(this.tag,":animation-start"),animationEnd:"".concat(this.tag,":animation-end")}}},{key:"properties",get:function get(){return{animation:{title:"Animation",type:String,values:["false"]},// @TODO: Deprecated
oldAnimation:{alias:"animation",attr:"pfe-animation"}}}}]);function PfeCollapsePanel(pfeClass){babelHelpers.classCallCheck(this,PfeCollapsePanel);return _super2.call(this,pfeClass||PfeCollapsePanel)}babelHelpers.createClass(PfeCollapsePanel,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(PfeCollapsePanel.prototype),"connectedCallback",this).call(this);this.expanded=!1;this.id=this.id||"".concat(PfeCollapsePanel.tag,"-").concat(generateId())}},{key:"_animate",value:function _animate(start,end){var _this2=this;this.classList.add("animating");this.style.height="".concat(start,"px");requestAnimationFrame(function(){requestAnimationFrame(function(){_this2.style.height="".concat(end,"px");_this2.classList.add("animating");_this2.addEventListener("transitionend",_this2._transitionEndHandler)})})}},{key:"_transitionEndHandler",value:function _transitionEndHandler(event){event.target.style.height="";event.target.classList.remove("animating");event.target.removeEventListener("transitionend",this._transitionEndHandler);this.emitEvent(PfeCollapsePanel.events.animationEnd,{detail:{expanded:this.expanded,panel:this}})}},{key:"_fireAnimationEvent",value:function _fireAnimationEvent(state){this.emitEvent(PfeCollapsePanel.events.animationStart,{detail:{state:state,panel:this}})}}]);return PfeCollapsePanel}(_pfelement.default);_exports.PfeCollapsePanel=PfeCollapsePanel;var PfeCollapse=/*#__PURE__*/function(_PFElement3){babelHelpers.inherits(PfeCollapse,_PFElement3);var _super3=_createSuper(PfeCollapse);babelHelpers.createClass(PfeCollapse,[{key:"html",// Injected at build-time
get:function get(){return"\n<style>:host{display:block}:host([hidden]){display:none}:host(.animating),:host([expanded]){display:block} /*# sourceMappingURL=pfe-collapse.min.css.map */</style>\n<slot></slot>"}// Injected at build-time
},{key:"templateUrl",get:function get(){return"pfe-collapse.html"}},{key:"styleUrl",get:function get(){return"pfe-collapse.scss"}},{key:"schemaUrl",get:function get(){return"pfe-collapse.json"}},{key:"animates",get:function get(){return"false"===this.animation?!1:!0}}],[{key:"version",// Injected at build-time
get:function get(){return"1.0.0"}},{key:"slots",get:function get(){return{default:{title:"Default",type:"array",namedSlot:!1,items:{oneOf:[{$ref:"pfe-collapsibe-toggle"},{$ref:"pfe-collapse-panel"}]}}}}},{key:"tag",get:function get(){return"pfe-collapse"}},{key:"events",get:function get(){return{change:"".concat(this.tag,":change")}}},{key:"properties",get:function get(){return{animation:{title:"Animation",type:String,values:["false"],observer:"_animationChanged"},// @TODO: Deprecated
oldAnimation:{alias:"animation",attr:"pfe-animation"}}}}]);function PfeCollapse(pfeClass){var _this3;babelHelpers.classCallCheck(this,PfeCollapse);_this3=_super3.call(this,pfeClass||PfeCollapse);_this3._toggle=null;_this3._panel=null;_this3._linkControls=_this3._linkControls.bind(babelHelpers.assertThisInitialized(_this3));_this3._changeHandler=_this3._changeHandler.bind(babelHelpers.assertThisInitialized(_this3));_this3._observer=new MutationObserver(_this3._linkControls);_this3.addEventListener(PfeCollapse.events.change,_this3._changeHandler);_this3.addEventListener(PfeCollapse.events.animationStart,_this3._animationStartHandler);_this3.addEventListener(PfeCollapse.events.animationEnd,_this3._animationEndHandler);return _this3}babelHelpers.createClass(PfeCollapse,[{key:"connectedCallback",value:function connectedCallback(){var _this4=this;babelHelpers.get(babelHelpers.getPrototypeOf(PfeCollapse.prototype),"connectedCallback",this).call(this);Promise.all([customElements.whenDefined(PfeCollapsePanel.tag),customElements.whenDefined(PfeCollapseToggle.tag)]).then(function(){if(_this4.hasLightDOM())_this4._linkControls();_this4._observer.observe(_this4,{childList:!0})})}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(PfeCollapse.prototype),"disconnectedCallback",this).call(this);this.removeEventListener(PfeCollapse.events.change,this._changeHandler);this.removeEventListener(PfeCollapse.events.animationStart,this._animationStartHandler);this.removeEventListener(PfeCollapse.events.animationEnd,this._animationEndHandler);this._observer.disconnect()}},{key:"_animationChanged",value:function _animationChanged(oldVal,newVal){if(!newVal){return}if("false"!==newVal&&"true"!==newVal){return}if(this._panel){this._panel.animation=newVal}}},{key:"toggle",value:function toggle(){this._toggle.toggle()}},{key:"_linkControls",value:function _linkControls(){this._toggle=this.querySelector(PfeCollapseToggle.tag);this._panel=this.querySelector(PfeCollapsePanel.tag);this._toggle.setAttribute("aria-controls",this._panel.id)}},{key:"_animationStartHandler",value:function _animationStartHandler(){this.classList.add("animating")}},{key:"_animationEndHandler",value:function _animationEndHandler(){this.classList.remove("animating")}},{key:"_changeHandler",value:function _changeHandler(event){}}]);return PfeCollapse}(_pfelement.default);_exports.PfeCollapse=PfeCollapse;_pfelement.default.create(PfeCollapse);_pfelement.default.create(PfeCollapseToggle);_pfelement.default.create(PfeCollapsePanel)});